<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recursed Editor</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=UnifrakturMaguntia&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="default.png">
</head>
<body>
    <div class="top-border"></div>
    <div class="container">
        <header class="title-section">
            <h1>Recursed</h1>
            <p>A recursive image editor that creates infinite zoom animations by repeatedly scaling and overlaying an image onto itself.</p>
        </header>
        <div class="upload-section">
            <input type="file" id="imageInput" accept="image/*">
            <div class="upload-message">
                <p>ðŸ‘† Upload an image to begin</p>
            </div>
        </div>
        <div class="controls">
            <button id="flipStack">Flip Stack</button>
            <div class="frame-count">
                <label for="frameCount">Frame Count:</label>
                <input type="number" id="frameCount" value="15" min="1">
            </div>
            
            <div class="sliders">
                <div class="slider-container">
                    <label for="boxScale">Box Scale</label>
                    <input type="range" id="boxScale" min="0.1" max="0.8" step="0.01" value="0.15">
                </div>
                <div class="slider-container">
                    <label for="originX">Origin X</label>
                    <input type="range" id="originX" min="0" max="1" step="0.01" value="0.15">
                </div>
                <div class="slider-container">
                    <label for="originY">Origin Y</label>
                    <input type="range" id="originY" min="0" max="1" step="0.01" value="0.63">
                </div>
            </div>
        </div>
        <div class="preview-container">
            <div class="preview">
                <h3>Main Preview</h3>
                <canvas id="canvas"></canvas>
                <div class="preview-controls">
                    <button id="saveImage">Save Image</button>
                </div>
            </div>
            <div class="preview">
                <h3>Zoom In Preview</h3>
                <canvas id="zoomInPreview"></canvas>
                <div class="preview-controls">
                    <button id="zoomInApng">Save APNG</button>
                    <button id="zoomInGif">Save GIF</button>
                </div>
            </div>
            <div class="preview">
                <h3>Zoom Out Preview</h3>
                <canvas id="zoomOutPreview"></canvas>
                <div class="preview-controls">
                    <button id="zoomOutApng">Save APNG</button>
                    <button id="zoomOutGif">Save GIF</button>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
        <p>Created by Miguel using Claude â€¢ Version D</p>
    </footer>
    <!-- Add error handling for library loading -->
    <script>
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            console.error('Error: ' + msg + '\nURL: ' + url + '\nLine: ' + lineNo + '\nColumn: ' + columnNo + '\nError object: ' + JSON.stringify(error));
            return false;
        };
    </script>
    
    <!-- Update to relative paths -->
    <script src="pako.min.js" onerror="console.error('Failed to load pako.min.js')"></script>
    <script src="upng.js" onerror="console.error('Failed to load upng.js')"></script>
    <script src="gif.js" onerror="console.error('Failed to load gif.js')"></script>
    <script>
        // Check if libraries are loaded
        if (typeof UPNG === 'undefined') {
            console.error('UPNG library not loaded properly');
        }
        if (typeof pako === 'undefined') {
            console.error('pako library not loaded properly');
        }
        if (typeof GIF === 'undefined') {
            console.error('GIF library not loaded properly');
        }
    </script>
    <script src="script.js"></script>
</body>
</html>
